/*
 Highstock JS v7.1.2-modified (2019-07-03)

 Indicator series type for Highstock

 (c) 2010-2019 Pawe Dalek

 License: www.highcharts.com/license
*/
(function(b){"object"===typeof module&&module.exports?(b["default"]=b,module.exports=b):"function"===typeof define&&define.amd?define("highcharts/indicators/volume-by-price",["highcharts","highcharts/modules/stock"],function(n){b(n);b.Highcharts=n;return b}):b("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(b){function n(g,b,n,u){g.hasOwnProperty(b)||(g[b]=u.apply(null,n))}b=b?b._modules:{};n(b,"indicators/volume-by-price.src.js",[b["parts/Globals.js"],b["parts/Utilities.js"]],function(g,
b){var n=b.isArray,u=Math.abs;b=g.noop;var v=g.addEvent,x=g.correctFloat,B=g.seriesType,w=g.seriesTypes.column.prototype;B("vbp","sma",{params:{ranges:12,volumeSeriesID:"volume"},zoneLines:{enabled:!0,styles:{color:"#0A9AC9",dashStyle:"LongDash",lineWidth:1}},volumeDivision:{enabled:!0,styles:{positiveColor:"rgba(144, 237, 125, 0.8)",negativeColor:"rgba(244, 91, 91, 0.8)"}},animationLimit:1E3,enableMouseTracking:!1,pointPadding:0,zIndex:-1,crisp:!0,dataGrouping:{enabled:!1},dataLabels:{allowOverlap:!0,
enabled:!0,format:"P: {point.volumePos:.2f} | N: {point.volumeNeg:.2f}",padding:0,style:{fontSize:"7px"},verticalAlign:"top"}},{nameBase:"Volume by Price",bindTo:{series:!1,eventName:"afterSetExtremes"},calculateOn:"render",markerAttribs:b,drawGraph:b,getColumnMetrics:w.getColumnMetrics,crispCol:w.crispCol,init:function(c){var a,f;g.seriesTypes.sma.prototype.init.apply(this,arguments);a=this.options.params;f=this.linkedParent;a=c.get(a.volumeSeriesID);this.addCustomEvents(f,a);return this},addCustomEvents:function(c,
a){function f(){e.chart.redraw();e.setData([]);e.zoneStarts=[];e.zoneLinesSVG&&(e.zoneLinesSVG.destroy(),delete e.zoneLinesSVG)}var e=this;e.dataEventsToUnbind.push(v(c,"remove",function(){f()}));a&&e.dataEventsToUnbind.push(v(a,"remove",function(){f()}));return e},animate:function(c){var a=this,f={};g.svg&&!c&&(f.translateX=a.yAxis.pos,a.group.animate(f,g.extend(g.animObject(a.options.animation),{step:function(c,f){a.group.attr({scaleX:Math.max(.001,f.pos)})}})),a.animate=null)},drawPoints:function(){this.options.volumeDivision.enabled&&
(this.posNegVolume(!0,!0),w.drawPoints.apply(this,arguments),this.posNegVolume(!1,!1));w.drawPoints.apply(this,arguments)},posNegVolume:function(c,a){var f=a?["positive","negative"]:["negative","positive"],e=this.options.volumeDivision,q=this.points.length,t=[],d=[],h=0,m,k,b,l;c?(this.posWidths=t,this.negWidths=d):(t=this.posWidths,d=this.negWidths);for(;h<q;h++)l=this.points[h],l[f[0]+"Graphic"]=l.graphic,l.graphic=l[f[1]+"Graphic"],c&&(m=l.shapeArgs.width,k=this.priceZones[h],(b=k.wholeVolumeData)?
(t.push(m/b*k.positiveVolumeData),d.push(m/b*k.negativeVolumeData)):(t.push(0),d.push(0))),l.color=a?e.styles.positiveColor:e.styles.negativeColor,l.shapeArgs.width=a?this.posWidths[h]:this.negWidths[h],l.shapeArgs.x=a?l.shapeArgs.x:this.posWidths[h]},translate:function(){var c=this,a=c.options,f=c.chart,e=c.yAxis,b=e.min,t=c.options.zoneLines,d=c.priceZones,h=0,m,k,y,l,n,r,p,z,v,A;w.translate.apply(c);m=c.points;m.length&&(p=.5>a.pointPadding?a.pointPadding:.1,a=c.volumeDataArray,k=g.arrayMax(a),
y=f.plotWidth/2,z=f.plotTop,l=u(e.toPixels(b)-e.toPixels(b+c.rangeStep)),n=u(e.toPixels(b)-e.toPixels(b+c.rangeStep)),p&&(b=u(l*(1-2*p)),h=u((l-b)/2),l=u(b)),m.forEach(function(a,b){v=a.barX=a.plotX=0;A=a.plotY=e.toPixels(d[b].start)-z-(e.reversed?l-n:l)-h;r=x(y*d[b].wholeVolumeData/k);a.pointWidth=r;a.shapeArgs=c.crispCol.apply(c,[v,A,r,l]);a.volumeNeg=d[b].negativeVolumeData;a.volumePos=d[b].positiveVolumeData;a.volumeAll=d[b].wholeVolumeData}),t.enabled&&c.drawZones(f,e,c.zoneStarts,t.styles))},
getValues:function(b,a){var c=b.processedXData,e=b.processedYData,q=this.chart,t=a.ranges,d=[],h=[],m=[],k;if(!b.chart)return g.error("Base series not found! In case it has been removed, add a new one.",!0,q);if(!(k=q.get(a.volumeSeriesID)))return g.error("Series "+a.volumeSeriesID+" not found! Check `volumeSeriesID`.",!0,q);if((a=n(e[0]))&&4!==e[0].length)return g.error("Type of "+b.name+" series is different than line, OHLC or candlestick.",!0,q);(this.priceZones=this.specifyZones(a,c,e,t,k)).forEach(function(a,
b){d.push([a.x,a.end]);h.push(d[b][0]);m.push(d[b][1])});return{values:d,xData:h,yData:m}},specifyZones:function(b,a,f,e,q){var c;if(b){c=f.length;for(var d=f[0][3],h=d,m=1,k;m<c;m++)k=f[m][3],k<d&&(d=k),k>h&&(h=k);c={min:d,max:h}}else c=!1;c=(d=c)?d.min:g.arrayMin(f);k=d?d.max:g.arrayMax(f);var d=this.zoneStarts=[],h=[],n=0,m=1,l;if(!c||!k)return this.points.length&&(this.setData([]),this.zoneStarts=[],this.zoneLinesSVG.destroy()),[];l=this.rangeStep=x(k-c)/e;for(d.push(c);n<e-1;n++)d.push(x(d[n]+
l));d.push(k);for(e=d.length;m<e;m++)h.push({index:m-1,x:a[0],start:d[m-1],end:d[m]});return this.volumePerZone(b,h,q,a,f)},volumePerZone:function(b,a,f,e,g){var c=this,d=f.processedXData,h=f.processedYData,m=a.length-1,k=g.length;f=h.length;var n,l,q,r,p;u(k-f)&&(e[0]!==d[0]&&h.unshift(0),e[k-1]!==d[f-1]&&h.push(0));c.volumeDataArray=[];a.forEach(function(a){a.wholeVolumeData=0;a.positiveVolumeData=0;for(p=a.negativeVolumeData=0;p<k;p++)q=l=!1,r=b?g[p][3]:g[p],n=p?b?g[p-1][3]:g[p-1]:r,r<=a.start&&
0===a.index&&(l=!0),r>=a.end&&a.index===m&&(q=!0),(r>a.start||l)&&(r<a.end||q)&&(a.wholeVolumeData+=h[p],n>r?a.negativeVolumeData+=h[p]:a.positiveVolumeData+=h[p]);c.volumeDataArray.push(a.wholeVolumeData)});return a},drawZones:function(b,a,f,e){var c=b.renderer,g=this.zoneLinesSVG,d=[],h=b.plotWidth,m=b.plotTop,k;f.forEach(function(c){k=a.toPixels(c)-m;d=d.concat(b.renderer.crispLine(["M",0,k,"L",h,k],e.lineWidth))});g?g.animate({d:d}):g=this.zoneLinesSVG=c.path(d).attr({"stroke-width":e.lineWidth,
stroke:e.color,dashstyle:e.dashStyle,zIndex:this.group.zIndex+.1}).add(this.group)}},{destroy:function(){this.negativeGraphic&&(this.negativeGraphic=this.negativeGraphic.destroy());return g.Point.prototype.destroy.apply(this,arguments)}})});n(b,"masters/indicators/volume-by-price.src.js",[],function(){})});
//# sourceMappingURL=volume-by-price.js.map
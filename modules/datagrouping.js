/*
 Highstock JS v7.1.2-modified (2019-07-03)

 Data grouping module

 (c) 2010-2019 Torstein Hnsi

 License: www.highcharts.com/license
*/
(function(e){"object"===typeof module&&module.exports?(e["default"]=e,module.exports=e):"function"===typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){e(t);e.Highcharts=t;return e}):e("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(e){function t(d,e,n,t){d.hasOwnProperty(e)||(d[e]=t.apply(null,n))}e=e?e._modules:{};t(e,"parts/DataGrouping.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(d,e){var n=e.isNumber;e=d.addEvent;var t=
d.arrayMax,J=d.arrayMin,w=d.Axis,K=d.defaultPlotOptions,E=d.defined,L=d.extend,M=d.format,F=d.merge,y=d.pick,N=d.Point,z=d.Series,O=d.Tooltip,h=d.approximations={sum:function(a){var c=a.length,b;if(!c&&a.hasNulls)b=null;else if(c)for(b=0;c--;)b+=a[c];return b},average:function(a){var c=a.length;a=h.sum(a);n(a)&&c&&(a/=c);return a},averages:function(){var a=[];[].forEach.call(arguments,function(c){a.push(h.average(c))});return void 0===a[0]?void 0:a},open:function(a){return a.length?a[0]:a.hasNulls?
null:void 0},high:function(a){return a.length?t(a):a.hasNulls?null:void 0},low:function(a){return a.length?J(a):a.hasNulls?null:void 0},close:function(a){return a.length?a[a.length-1]:a.hasNulls?null:void 0},ohlc:function(a,c,b,u){a=h.open(a);c=h.high(c);b=h.low(b);u=h.close(u);if(n(a)||n(c)||n(b)||n(u))return[a,c,b,u]},range:function(a,c){a=h.low(a);c=h.high(c);if(n(a)||n(c))return[a,c];if(null===a&&null===c)return null}},G=function(a,c,b,u){var f=this,d=f.data,e=f.options&&f.options.data,p=[],k=
[],x=[],l=a.length,g,B,t=!!c,v=[],q=f.pointArrayMap,w=q&&q.length,A=["x"].concat(q||["y"]),C=0,y=0,z,r;u="function"===typeof u?u:h[u]?h[u]:h[f.getDGApproximation&&f.getDGApproximation()||"average"];w?q.forEach(function(){v.push([])}):v.push([]);z=w||1;for(r=0;r<=l&&!(a[r]>=b[0]);r++);for(r;r<=l;r++){for(;void 0!==b[C+1]&&a[r]>=b[C+1]||r===l;){g=b[C];f.dataGroupInfo={start:f.cropStart+y,length:v[0].length};B=u.apply(f,v);f.pointClass&&!E(f.dataGroupInfo.options)&&(f.dataGroupInfo.options=F(f.pointClass.prototype.optionsToObject.call({series:f},
f.options.data[f.cropStart+y])),A.forEach(function(a){delete f.dataGroupInfo.options[a]}));void 0!==B&&(p.push(g),k.push(B),x.push(f.dataGroupInfo));y=r;for(g=0;g<z;g++)v[g].length=0,v[g].hasNulls=!1;C+=1;if(r===l)break}if(r===l)break;if(q){g=f.cropStart+r;B=d&&d[g]||f.pointClass.prototype.applyOptions.apply({series:f},[e[g]]);var D;for(g=0;g<w;g++)D=B[q[g]],n(D)?v[g].push(D):null===D&&(v[g].hasNulls=!0)}else g=t?c[r]:null,n(g)?v[0].push(g):null===g&&(v[0].hasNulls=!0)}return{groupedXData:p,groupedYData:k,
groupMap:x}},H={approximations:h,groupData:G},q=z.prototype,P=q.processData,Q=q.generatePoints,A={groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],
month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},I={line:{},spline:{},area:{},areaspline:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5}},R=d.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]];q.getDGApproximation=function(){return d.seriesTypes.arearange&&this instanceof
d.seriesTypes.arearange?"range":d.seriesTypes.ohlc&&this instanceof d.seriesTypes.ohlc?"ohlc":d.seriesTypes.column&&this instanceof d.seriesTypes.column?"sum":"average"};q.groupData=G;q.processData=function(){var a=this.chart,c=this.options.dataGrouping,b=!1!==this.allowDG&&c&&y(c.enabled,a.options.isStock),d=this.visible||!a.options.chart.ignoreHiddenSeries,f,e=this.currentDataGrouping,m,p=!1;this.forceCrop=b;this.groupPixelWidth=null;this.hasProcessed=!0;b&&!this.requireSorting&&(this.requireSorting=
p=!0);b=!1===P.apply(this,arguments)||!b;p&&(this.requireSorting=!1);if(!b){this.destroyGroupedData();var k,b=c.groupAll?this.xData:this.processedXData,x=c.groupAll?this.yData:this.processedYData,l=a.plotSizeX,a=this.xAxis,g=a.options.ordinal,n=this.groupPixelWidth=a.getGroupPixelWidth&&a.getGroupPixelWidth();if(n){this.isDirty=f=!0;this.points=null;p=a.getExtremes();m=p.min;var p=p.max,g=g&&a.getGroupIntervalFactor(m,p,this)||1,n=n*(p-m)/l*g,l=a.getTimeTicks(a.normalizeTimeTickInterval(n,c.units||
R),Math.min(m,b[0]),Math.max(p,b[b.length-1]),a.options.startOfWeek,b,this.closestPointRange),x=q.groupData.apply(this,[b,x,l,c.approximation]),b=x.groupedXData,g=x.groupedYData,h=0;if(c.smoothed&&b.length){k=b.length-1;for(b[k]=Math.min(b[k],p);k--&&0<k;)b[k]+=n/2;b[0]=Math.max(b[0],m)}for(k=1;k<l.length;k++)l.info.segmentStarts&&-1!==l.info.segmentStarts.indexOf(k)||(h=Math.max(l[k]-l[k-1],h));m=l.info;m.gapSize=h;this.closestPointRange=l.info.totalRange;this.groupMap=x.groupMap;if(E(b[0])&&b[0]<
a.min&&d){if(!E(a.options.min)&&a.min<=a.dataMin||a.min===a.dataMin)a.min=b[0];a.dataMin=b[0]}c.groupAll&&(c=this.cropData(b,g,a.min,a.max,1),b=c.xData,g=c.yData);this.processedXData=b;this.processedYData=g}else this.groupMap=null;this.hasGroupedData=f;this.currentDataGrouping=m;this.preventGraphAnimation=(e&&e.totalRange)!==(m&&m.totalRange)}};q.destroyGroupedData=function(){var a=this.groupedData;(a||[]).forEach(function(c,b){c&&(a[b]=c.destroy?c.destroy():null)});this.groupedData=null};q.generatePoints=
function(){Q.apply(this);this.destroyGroupedData();this.groupedData=this.hasGroupedData?this.points:null};e(N,"update",function(){if(this.dataGroup)return d.error(24,!1,this.series.chart),!1});e(O,"headerFormatter",function(a){var c=this.chart.time,b=a.labelConfig,d=b.series,f=d.tooltipOptions,e=d.options.dataGrouping,m=f.xDateFormat,p,k=d.xAxis,h,l=f[(a.isFooter?"footer":"header")+"Format"];k&&"datetime"===k.options.type&&e&&n(b.key)&&(h=d.currentDataGrouping,e=e.dateTimeLabelFormats||A.dateTimeLabelFormats,
h?(f=e[h.unitName],1===h.count?m=f[0]:(m=f[1],p=f[2])):!m&&e&&(m=this.getXDateFormat(b,f,k)),m=c.dateFormat(m,b.key),p&&(m+=c.dateFormat(p,b.key+h.totalRange-1)),d.chart.styledMode&&(l=this.styledModeFormat(l)),a.text=M(l,{point:L(b.point,{key:m}),series:d},c),a.preventDefault())});e(z,"destroy",q.destroyGroupedData);e(z,"afterSetOptions",function(a){a=a.options;var c=this.type,b=this.chart.options.plotOptions,d=K[c].dataGrouping,e=this.useCommonDataGrouping&&A;if(I[c]||e)d||(d=F(A,I[c])),a.dataGrouping=
F(e,d,b.series&&b.series.dataGrouping,b[c].dataGrouping,this.userOptions.dataGrouping)});e(w,"afterSetScale",function(){this.series.forEach(function(a){a.hasProcessed=!1})});w.prototype.getGroupPixelWidth=function(){var a=this.series,c=a.length,b,d=0,e=!1,h;for(b=c;b--;)(h=a[b].options.dataGrouping)&&(d=Math.max(d,y(h.groupPixelWidth,A.groupPixelWidth)));for(b=c;b--;)(h=a[b].options.dataGrouping)&&a[b].hasProcessed&&(c=(a[b].processedXData||a[b].data).length,a[b].groupPixelWidth||c>this.chart.plotSizeX/
d||c&&h.forced)&&(e=!0);return e?d:0};w.prototype.setDataGrouping=function(a,c){var b;c=y(c,!0);a||(a={forced:!1,units:null});if(this instanceof w)for(b=this.series.length;b--;)this.series[b].update({dataGrouping:a},!1);else this.chart.options.series.forEach(function(b){b.dataGrouping=a},!1);this.ordinalSlope=null;c&&this.chart.redraw()};d.dataGrouping=H;"";return H});t(e,"masters/modules/datagrouping.src.js",[e["parts/DataGrouping.js"]],function(d){return d})});
//# sourceMappingURL=datagrouping.js.map